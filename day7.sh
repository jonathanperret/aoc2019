CODE=day7.txt; runghc day7.hs | while read -a PHASES; do echo 0 > /tmp/output; echo -n "phases=${PHASES[*]} "; awk -f day7.awk -v INPUT=<(echo ${PHASES[4]}; awk -f day7.awk -v INPUT=<(echo ${PHASES[3]}; awk -f day7.awk -v INPUT=<(echo ${PHASES[2]}; awk -f day7.awk -v INPUT=<(echo ${PHASES[1]}; awk -f day7.awk -v INPUT=<(echo ${PHASES[0]}; tail -F /tmp/output) $CODE) $CODE) $CODE) $CODE) $CODE >> /tmp/output; tail -1 /tmp/output; done|sort -k 6 -g
